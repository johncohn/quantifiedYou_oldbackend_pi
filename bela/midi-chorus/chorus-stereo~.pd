#N canvas 0 0 900 700 12;
#X obj 50 30 inlet~;
#X obj 120 30 inlet~;
#X obj 50 650 outlet~;
#X obj 120 650 outlet~;
#X text 200 10 Stereo Chorus - Tone.js style;
#X text 200 30 Short delays \, relative depth \, feedback;
#X obj 50 70 delwrite~ ch-dl-L 30;
#X obj 120 70 delwrite~ ch-dl-R 30;
#X text 200 70 30ms buffer (Tone.js: 2-20ms range);
#X obj 350 80 r chorus-rate;
#X obj 350 100 pack 0 30;
#X obj 350 120 line~;
#X obj 350 140 phasor~;
#X obj 350 160 cos~;
#X text 450 80 LFO rate (Hz);
#X obj 350 200 r chorus-delay;
#X obj 350 220 pack 0 30;
#X obj 350 240 line~;
#X text 450 200 Base delay time (ms);
#X obj 350 280 r chorus-depth;
#X obj 350 300 pack 0 30;
#X obj 350 320 line~;
#X text 450 280 Depth (0-1 relative);
#X obj 350 360 *~;
#X obj 350 380 *~;
#X obj 350 400 +~;
#X text 450 360 depth * delayTime;
#X text 450 400 delayTime + modulation;
#X obj 500 140 phasor~;
#X obj 500 160 +~ 0.5;
#X obj 500 180 wrap~;
#X obj 500 200 cos~;
#X text 600 140 R channel: 180deg offset;
#X obj 500 240 *~;
#X obj 500 260 *~;
#X obj 500 280 +~;
#X obj 50 160 vd~ ch-dl-L;
#X obj 120 160 vd~ ch-dl-R;
#X obj 350 440 r chorus-feedback;
#X obj 350 460 pack 0 30;
#X obj 350 480 line~;
#X text 450 440 Feedback (0-0.8);
#X obj 50 220 *~;
#X obj 120 220 *~;
#X obj 50 260 +~;
#X obj 120 260 +~;
#X text 200 220 Wet * feedback;
#X text 200 260 Add to delay input;
#X obj 350 520 r chorus-mix;
#X obj 350 540 pack 0 30;
#X obj 350 560 line~;
#X obj 350 600 expr~ 1-$v1;
#X text 450 520 Wet/dry mix;
#X obj 50 380 *~;
#X obj 120 380 *~;
#X obj 50 420 *~;
#X obj 120 420 *~;
#X obj 50 500 +~;
#X obj 120 500 +~;
#X text 200 380 Wet * mix;
#X text 200 420 Dry * (1-mix);
#X obj 50 560 *~ 0.9;
#X obj 120 560 *~ 0.9;
#X text 200 560 Output trim;
#X connect 0 0 6 0;
#X connect 0 0 55 0;
#X connect 1 0 7 0;
#X connect 1 0 56 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 11 0 28 0;
#X connect 12 0 13 0;
#X connect 13 0 23 0;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 17 0 23 1;
#X connect 17 0 25 0;
#X connect 17 0 33 1;
#X connect 17 0 35 0;
#X connect 19 0 20 0;
#X connect 20 0 21 0;
#X connect 21 0 24 1;
#X connect 21 0 34 1;
#X connect 23 0 24 0;
#X connect 24 0 25 1;
#X connect 25 0 36 0;
#X connect 25 0 37 0;
#X connect 28 0 29 0;
#X connect 29 0 30 0;
#X connect 30 0 31 0;
#X connect 31 0 33 0;
#X connect 33 0 34 0;
#X connect 34 0 35 1;
#X connect 35 0 37 0;
#X connect 36 0 42 0;
#X connect 37 0 43 0;
#X connect 38 0 39 0;
#X connect 39 0 40 0;
#X connect 40 0 42 1;
#X connect 40 0 43 1;
#X connect 42 0 44 0;
#X connect 43 0 45 0;
#X connect 44 0 6 0;
#X connect 45 0 7 0;
#X connect 48 0 49 0;
#X connect 49 0 50 0;
#X connect 50 0 53 1;
#X connect 50 0 54 1;
#X connect 50 0 51 0;
#X connect 51 0 55 1;
#X connect 51 0 56 1;
#X connect 53 0 57 0;
#X connect 54 0 58 0;
#X connect 55 0 57 1;
#X connect 56 0 58 1;
#X connect 57 0 61 0;
#X connect 58 0 62 0;
#X connect 36 0 53 0;
#X connect 37 0 54 0;
#X connect 61 0 2 0;
#X connect 62 0 3 0;
