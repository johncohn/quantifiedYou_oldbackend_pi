#N canvas 200 200 1100 850 12;
#N canvas 0 0 600 400 MIDI-INPUT 0;
#X obj 50 50 ctlin 1;
#X obj 50 80 t f f;
#X obj 100 100 print CC1-rate;
#X obj 50 120 / 127;
#X obj 50 140 * 7.9;
#X obj 50 160 + 0.1;
#X obj 50 180 s chorus-rate;
#X obj 200 50 ctlin 2;
#X obj 200 80 t f f;
#X obj 250 100 print CC2-depth;
#X obj 200 120 / 127;
#X obj 200 140 s chorus-depth;
#X obj 350 50 ctlin 3;
#X obj 350 80 t f f;
#X obj 400 100 print CC3-fback;
#X obj 350 120 / 127;
#X obj 350 140 * 0.8;
#X obj 350 160 s chorus-feedback;
#X obj 50 220 ctlin 4;
#X obj 50 250 t f f;
#X obj 100 270 print CC4-mix;
#X obj 50 290 / 127;
#X obj 50 310 s chorus-mix;
#X obj 200 220 ctlin 5;
#X obj 200 250 t f f;
#X obj 250 270 print CC5-gain;
#X obj 200 290 / 127;
#X obj 200 310 s master-gain;
#X obj 350 220 ctlin 6;
#X obj 350 250 t f f;
#X obj 400 270 print CC6-sweep;
#X obj 350 290 >= 64;
#X obj 350 310 s sweep-enable;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 1 1 2 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 7 0 8 0;
#X connect 8 0 10 0;
#X connect 8 1 9 0;
#X connect 10 0 11 0;
#X connect 12 0 13 0;
#X connect 13 0 15 0;
#X connect 13 1 14 0;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 18 0 19 0;
#X connect 19 0 21 0;
#X connect 19 1 20 0;
#X connect 21 0 22 0;
#X connect 23 0 24 0;
#X connect 24 0 26 0;
#X connect 24 1 25 0;
#X connect 26 0 27 0;
#X connect 28 0 29 0;
#X connect 29 0 31 0;
#X connect 29 1 30 0;
#X connect 31 0 32 0;
#X restore 700 100 pd MIDI-INPUT;
#N canvas 0 0 600 500 AUTO-SWEEP 0;
#X obj 50 50 loadbang;
#X msg 50 70 1;
#X obj 50 90 metro 50;
#X obj 50 130 spigot;
#X obj 150 110 r sweep-enable;
#X obj 50 170 osc~ 0.06;
#X obj 50 190 snapshot~;
#X obj 50 210 * 0.5;
#X obj 50 230 + 0.5;
#X obj 50 250 * 3.9;
#X obj 50 270 + 0.1;
#X obj 50 290 s chorus-rate;
#X obj 200 170 osc~ 0.09;
#X obj 200 190 snapshot~;
#X obj 200 210 * 0.5;
#X obj 200 230 + 0.5;
#X obj 200 250 s chorus-depth;
#X obj 350 170 osc~ 0.07;
#X obj 350 190 snapshot~;
#X obj 350 210 * 0.3;
#X obj 350 230 + 0.1;
#X obj 350 250 s chorus-feedback;
#X obj 50 330 osc~ 0.05;
#X obj 50 350 snapshot~;
#X obj 50 370 * 0.5;
#X obj 50 390 + 0.5;
#X obj 50 410 s chorus-mix;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 6 0;
#X connect 3 0 13 0;
#X connect 3 0 18 0;
#X connect 3 0 23 0;
#X connect 4 0 3 1;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 17 0 18 0;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 20 0 21 0;
#X connect 22 0 23 0;
#X connect 23 0 24 0;
#X connect 24 0 25 0;
#X connect 25 0 26 0;
#X restore 700 140 pd AUTO-SWEEP;
#X text 10 10 MIDI Chorus - Tone.js Style;
#X text 10 30 CC6 toggles auto-sweep on/off;
#X obj 50 120 osc~ 440;
#X obj 50 140 *~ 0.35;
#X obj 50 170 hip~ 5;
#X obj 100 170 hip~ 5;
#X obj 50 210 chorus-stereo~;
#X obj 50 260 bela/scope~ 0 1;
#X obj 50 300 *~ 0.9;
#X obj 100 300 *~ 0.9;
#X obj 250 300 r master-gain;
#X obj 250 320 pack 0 30;
#X obj 250 340 line~;
#X obj 50 360 *~;
#X obj 100 360 *~;
#X obj 50 420 dac~ 1 2;
#X text 160 120 Test tone 440Hz;
#X text 160 210 Chorus effect;
#X text 160 260 Scope channels 0-1;
#X text 160 360 Master gain;
#X obj 700 180 loadbang;
#X msg 700 200 3.5;
#X obj 700 220 s chorus-delay;
#X obj 700 260 loadbang;
#X msg 700 280 1;
#X obj 700 300 s master-gain;
#X obj 700 340 loadbang;
#X msg 700 360 1;
#X obj 700 380 s sweep-enable;
#X text 780 200 Default delay 3.5ms;
#X text 780 280 Default gain 1.0;
#X text 780 360 Sweep ON at start;
#X text 10 50 === MIDI CC ===;
#X text 10 70 CC1:Rate CC2:Depth CC3:Feedback;
#X text 10 90 CC4:Mix CC5:Gain CC6:SweepToggle;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 5 0 7 0;
#X connect 6 0 8 0;
#X connect 7 0 8 1;
#X connect 8 0 9 0;
#X connect 8 0 10 0;
#X connect 8 1 9 1;
#X connect 8 1 11 0;
#X connect 10 0 15 0;
#X connect 11 0 16 0;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 14 0 15 1;
#X connect 14 0 16 1;
#X connect 15 0 17 0;
#X connect 16 0 17 1;
#X connect 22 0 23 0;
#X connect 23 0 24 0;
#X connect 25 0 26 0;
#X connect 26 0 27 0;
#X connect 28 0 29 0;
#X connect 29 0 30 0;
